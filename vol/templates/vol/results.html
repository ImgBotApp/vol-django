{% extends "vol/base.html" %}
{% block title %} Results {% endblock %}
{% block content %}
<div class="container">

    <div class="vol-results-text">
        <p><strong>Done!</strong></p>
        These are your results, and we hope you like them.
        <p>Use the location and interest matches to fine tune results, should you
        have more or less results than you wish for. Enjoy!</p>
    </div>

<!-- TODO: * Improve visualision
           * Allow adding and removing of interests and places
           * Add advice on what would improve amount (more or less)
-->
    <div class="vol-results-text">
        <p><strong>Interests</strong>:
        Amount of matched global interests: {{ matched_interests_count }}
        {% for matched_interest in matched_interests %}
            <li> {{ matched_interest }} </li>
        {% endfor %}
        </p>
        <p>
        Amount of unmatched interests: {{ unmatched_interests_count }}
        {% for unmatched_interest in unmatched_interests %}
            <li>  {{ unmatched_interest }}</li>
        {% endfor %}
        </p>
        <strong>Location:</strong>
        {% if location_matches != 0 %}
            Amount of jobs in location found: {{ location_matches }}
        {% else %}
            No jobs found for your location, try widening your search area. Sorry!
        {% endif %}
        </p>
        <p>
        <strong>Results:</strong>
        {% if matched_intersection == 0 %}
            <strong> No complete matches were found!  </strong> Showing you all results in your area instead.
        {% else %}
            Jobs that match {% if unmatched_interests_count != 0 %} {{ matched_interests_count }} {% else %} all {% endif %}
                interests and locations: {{ job_count }}
        {% endif %}
        </p>
    </div>


        <div class="row vol-results-results">

    {% for job in jobs  %}
        <div class="col-lg-6">
        <h4> {{ job.title}}</h4>
    <strong>URL</strong>: <a href="{{ job.url }}">{{ job.url }}</a><br>
    <strong>Original URL</strong>: {% for v in job.site.values %} <a href="{{ v.url }}">{{ v.url }}</a> {% endfor %} <br> <!-- Surely a better way to do this-->
    <strong>Organisation</strong> <a href="{{ job.organisation.url }}">{{ job.organisation }}</a> <br> <!-- Include link and logo -->
    <strong>City</strong> {{ job.city }}<br> <!-- URL to query for all in Wellington? -->
    <p> {{ job.text }}</p>
        </div>
    {% endfor %}
        </div>
</div>
{% endblock %}