{% extends "vol/base.html" %}
{% block title %} Results {% endblock %}
{% block content %}

<!--TODO: make relative links work .. currently would seek all static assets relative to this doco.. -->
<div class="uk-container uk-container-center uk-margin-top uk-margin-large-bottom uk-link-muted">
    <h2>Interests:</h2>
    <p> Amount of matched global interests: {{ matched_interests_count }}</p>
        {% for matched_interest in matched_interests %}
    <li> {{ matched_interest }} </li>
        {% endfor %}
    </p>
    <p> Amount of unmatched interests: {{ unmatched_interests_count }}</p>
        {% for unmatched_interest in unmatched_interests %}
    <li>  {{ unmatched_interest }}</li>
        {% endfor %}
    </p>

    <h2> Location:</h2>
    <!-- TODO: If nothing in location, suggest changing it -->
    {% if location_matches != 0 %}
            <p> Amount of jobs in location found: {{ location_matches }} </p>
    {% else %}
        <p> No jobs found for your location, try widening your search area. Sorry! </p>
    {% endif %}

    <h2>Complete matches:</h2>
    {% if matched_interests_count == 0 %} <strong> No complete matches were found!  </strong> Showing you all results in your area instead. {% else %}
    <p> Jobs that match {% if unmatched_interests_count != 0 %} {{ matched_interests_count }} {% else %} all {% endif %}
        interests and locations: {{ job_count }} </p>
    {% endif %}

    {% for job in jobs  %}
    <h3> {{ job.title}}</h3>
    <strong>URL</strong>: <a href="{{ job.url }}">{{ job.url }}</a><br>
    <strong>Original URL</strong>: {% for v in job.site.values %} <a href="{{ v.url }}">{{ v.url }}</a> {% endfor %} <br> <!-- Surely a better way to do this-->
    <strong>Organisation</strong> <a href="{{ job.organisation.url }}">{{ job.organisation }}</a> <br> <!-- Include link and logo -->
    <strong>City</strong> {{ job.city }}<br> <!-- URL to query for all in Wellington? -->
    <p> {{ job.text }}</p>
    {% endfor %}

    {% if jobs %} <p><strong>Go get 'm, tiger!</strong></p> {% endif %}
</div>
{% endblock %}